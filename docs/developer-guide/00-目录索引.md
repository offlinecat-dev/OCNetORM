# OCORM 开发者指南

OCORM 是专为 HarmonyOS 5.0+ ArkTS 设计的轻量级 ORM 框架，提供 TypeORM 风格的 API，支持 SQLite 数据库操作。

---

## 快速导航

| 章节 | 内容 | 适合人群 |
|------|------|----------|
| [入门基础](#入门基础) | 初始化、实体定义、列配置 | 新手入门 |
| [数据操作](#数据操作) | CRUD、查询、分页、事务 | 日常开发 |
| [关系映射](#关系映射) | 一对一、一对多、多对多 | 复杂业务 |
| [高级功能](#高级功能) | 软删除、钩子、验证、迁移 | 进阶开发 |
| [数据处理](#数据处理) | 数据映射、ViewModel 转换 | UI 开发 |
| [运维支持](#运维支持) | 日志、错误处理、缓存 | 调试优化 |
| [参考资料](#参考资料) | API 速查、类型定义、示例 | 快速查阅 |

---

## 入门基础

| 文档 | 说明 |
|------|------|
| [01-初始化配置](./01-初始化配置.md) | 数据库连接、自动建表、自动迁移配置 |
| [02-实体定义](./02-实体定义.md) | Schema 方式和装饰器方式定义实体 |
| [03-列类型与选项](./03-列类型与选项.md) | ColumnType 枚举、列选项、主键定义 |

---

## 数据操作

| 文档 | 说明 |
|------|------|
| [04-Repository基础操作](./04-Repository基础操作.md) | 实体 CRUD 操作、EntityData 数据对象 |
| [05-QueryBuilder查询](./05-QueryBuilder查询.md) | 链式 API 构建复杂查询 |
| [06-分页与排序](./06-分页与排序.md) | 分页查询、多字段排序 |
| [07-批量操作](./07-批量操作.md) | 高性能批量插入 batchInsert、saveAll |
| [08-事务处理](./08-事务处理.md) | 事务管理、TransactionOptions、隔离级别 |

--- 

## 关系映射

| 文档 | 说明 |
|------|------|
| [09-一对一关系](./09-一对一关系.md) | One-to-One 关系定义与操作 |
| [10-一对多关系](./10-一对多关系.md) | One-to-Many 关系定义与操作 |
| [11-多对多关系](./11-多对多关系.md) | Many-to-Many 关系与中间表 |
| [12-关联加载策略](./12-关联加载策略.md) | 预加载与延迟加载策略 |

---

## 高级功能

| 文档 | 说明 |
|------|------|
| [13-软删除](./13-软删除.md) | 软删除配置、数据恢复、历史查询 |
| [14-生命周期钩子](./14-生命周期钩子.md) | 数据操作钩子、自动填充、审计日志 |
| [15-数据验证](./15-数据验证.md) | 内置验证规则、自定义验证器 |
| [16-Schema迁移](./16-Schema迁移.md) | 手动迁移脚本、自动迁移 |

---

## 数据处理

| 文档 | 说明 |
|------|------|
| [17-数据映射](./17-数据映射.md) | EntityData 与数据库记录的双向转换 |
| [18-ViewModel映射](./18-ViewModel映射.md) | EntityData 与 ViewModel 的类型安全转换 |

---

## 运维支持

| 文档 | 说明 |
|------|------|
| [19-日志系统](./19-日志系统.md) | SQL 日志、敏感数据脱敏、耗时统计 |
| [20-错误处理](./20-错误处理.md) | 错误分类、统一错误码、多语言消息 |
| [21-查询缓存](./21-查询缓存.md) | 一级查询缓存、缓存失效策略 |

---

## 参考资料

| 文档 | 说明 |
|------|------|
| [22-API速查表](./22-API速查表.md) | 核心 API 快速参考 |
| [23-类型定义速查](./23-类型定义速查.md) | 枚举类型和接口定义参考 |
| [24-最佳实践](./24-最佳实践.md) | 项目结构、性能优化、常见问题 |
| [25-代码示例集](./25-代码示例集.md) | 常见场景完整代码示例 |

---

## 快速开始示例

```typescript
import { OCORMInit, DatabaseConfig, defineEntity, Repository, ColumnType, EntityData } from '@aspect/ocorm'

// 1. 定义实体
defineEntity('User', {
  tableName: 'users',
  columns: [
    { property: 'id', primaryKey: true, autoIncrement: true },
    { property: 'name', type: ColumnType.TEXT },
    { property: 'email', type: ColumnType.TEXT, unique: true }
  ]
})

// 2. 初始化 ORM
const config = new DatabaseConfig('myapp.db')
await OCORMInit(context, { config })

// 3. 使用 Repository 进行 CRUD
const userRepo = new Repository('User')

// 创建
const user = new EntityData('User')
user.addProperty('name', 'Alice', 'string')
user.addProperty('email', 'alice@example.com', 'string')
await userRepo.save(user)

// 查询
const users = await userRepo.findAll()
```

---

## 版本要求

- **HarmonyOS**: 5.0.0+
- **API Level**: 12+
- **DevEco Studio**: 5.0.0+

---

## 相关链接

- [OCORM 源码仓库](https://github.com/offlinecat-dev/OCNetORM)
- [HarmonyOS 官方文档](https://developer.huawei.com/consumer/cn/doc/)
- [ArkTS 语言指南](https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-get-started-V5)
